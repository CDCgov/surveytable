---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# Background

<!-- badges: start -->
<!-- badges: end -->

In R, the standard way of analyzing complex surveys is using the `survey` package. The major purpose of the `surveytable` package is to ease the use of the `survey` package in certain applications. `surveytable` improves the output of `survey` functions by formatting and tabulating it; performs hypothesis tests; reduces the number of commands that users need to execute; and applies presentation standards to estimates, which is the usual practice at the National Center for Health Statistics (NCHS). 

The `surveytable` package allows users to use simple commands and produces formatted tabulated output. One useful function, which operates on categorical and logical variables, tabulates estimated counts and percentages with their standard errors and confidence intervals. It applies presentation standards for counts and percentages, and flags estimates if they should be suppressed, footnoted, or reviewed. Other functions list the variables in a survey, estimate the total population, tabulate survey subsets and variable interactions, tabulate numeric variables, calculate rates, perform t-tests, and save the output. 

The `surveytable` package is easier to use than using `survey` directly. With fewer commands, `surveytable` output has survey name, variable labels, formatted estimates, cleaner category values, both count and percentage estimates in a single table, and confidence intervals. The package also performs checking for presentation standards. 

# Installation

You can install the development version of `surveytable` like so:

``` r
install.packages(c("git2r", "remotes"))

# On local computer
remotes::install_git(
	url = "https://git.biotech.cdc.gov/kpr9/surveytable"
	, git = "git2r"
	, upgrade = "never")

# On EDAV RStudio
remotes::install_git(
	url = "https://git.biotech.cdc.gov/kpr9/surveytable"
	, upgrade = "never")

```

# Example

Here is a basic example, to get you started. 

```{r, results='asis'}
library(surveytable)
set_survey("vars2019")
```

```{r, results='asis'}
tab("AGER")
```

# Related packages

In all, there are 3 related packages:

* `surveytable`: functions for tabulating survey estimates
* `nchsdata`: public use files (PUFs) from the the National Center for Health Statistics (NCHS)
* `importsurvey`: functions for importing data into R

`importsurvey` imports surveys into R that are currently in other formats. The public versions of surveys that have already been imported are stored in `nchsdata`. 
